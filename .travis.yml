language: php

php:
  - 5.4
  - 5.6
  - 7.0
  - 7.1
  - 7.2

before_install:
  - pecl install memcache
  - echo "extension=memcache.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini

  - if [ -n "$GH_TOKEN" ]; then composer config github-oauth.github.com ${GH_TOKEN}; fi;
  - phpenv rehash

install:
  - composer install

script:
  - php vendor/bin/phpunit -c phpunit.xml

services: memcache